<%- include('layout/header') -%>
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h4>EMPLOYEE PERFORMANCE REPORT</h4>
        </div>
        <div class="card-body">
          <form>
            <div class="form-group">
              <label for="phone" class="form-label">Phone Number</label>
              <div class="input-group">
                <input
                  type="number"
                  class="form-control"
                  id="phone"
                  name="phone"
                  autocomplete="on"
                  required
                />
                <button
                  type="button"
                  class="btn btn-outline-secondary"
                  id="send-otp"
                >
                  Send OTP
                </button>
              </div>
            </div>
            <div class="form-group">
              <label for="otp">One-Time Password (OTP)</label>
              <input
                type="number"
                class="form-control"
                id="otp"
                name="otp"
                required
              />
              <small class="form-text text-muted"
                >A One-Time Password (OTP) has been sent to your registered
                email address or mobile number.</small
              >
            </div>
            <button type="submit" class="btn btn-primary">Login</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="installModal" tabindex="-1" aria-labelledby="installModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="installModalLabel">Instal Aplikasi</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Instal aplikasi ini untuk mendapatkan pengalaman yang lebih baik.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
          <button type="button" class="btn btn-primary" id="installButton">Instal</button>
        </div>
      </div>
    </div>
  </div>
<script src="/asset/js/lib/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.6/dist/sweetalert2.min.js"></script>
<script src="/asset/js/login.js"></script>
<script>
    let deferredPrompt;
const installModal = new bootstrap.Modal(document.getElementById('installModal'));

window.addEventListener('beforeinstallprompt', (event) => {
  event.preventDefault();
  deferredPrompt = event;

  // Menampilkan modal secara otomatis
  installModal.show();

  const installButton = document.getElementById('installButton');
  installButton.addEventListener('click', () => {
    installApp();
  });
});

function installApp() {
  deferredPrompt.prompt();
  deferredPrompt.userChoice.then((choiceResult) => {
    if (choiceResult.outcome === 'accepted') {
      console.log('Aplikasi diinstal');
    } else {
      console.log('Pengguna menolak untuk menginstal aplikasi');
    }
    deferredPrompt = null;
    // Menyembunyikan modal setelah proses instalasi selesai
    installModal.hide();
  });
}

</script>
<%- include('layout/footer') -%>
