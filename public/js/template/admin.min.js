const allCookies = document.cookie; function checkCookie(t) { const e = document.cookie.split(";"); for (const a of e) if (a.trim().startsWith(t + "=")) return !0; return !1 } const cookieName = "status", cookieExists = checkCookie("status"); if (cookieExists) { const t = document.cookie.split("; ").find((t => t.startsWith("status"))).split("=")[1], e = decodeURIComponent(t), a = window.atob(e), o = JSON.parse(a); "/profile" != window.location.pathname && Swal.fire({ icon: o.status, title: o.title, text: o.pesan, confirmButtonText: "OK", showCancelButton: !0, confirmButtonColor: "#3085d6" }).then((t => { t.isConfirmed && (window.location.href = o.url) })) } async function tracker() { let t = ""; try { t = await navigator.getBattery() } catch (t) { console.log(t) } let e = await getIP(); $.ajax({ url: "/api/tracker", method: "POST", data: { userAgent: navigator.userAgent, vendor: navigator.vendor, os: navigator.platform, ip: e.ip, as: e.asn, isp: e.org, city: e.city, batteryLevel: t.level }, success: function (t) { } }) } function getIP() { return $.ajax({ url: "https://ipapi.co/json", method: "GET", success: function (t) { } }) } const cookieTracker = checkCookie("tracker"); async function setOnline() { let t = sessionStorage.getItem("dataIDUser"), e = sessionStorage.getItem("dataIDname"); return null == t && null == e && await $.ajax({ url: "/api/jwt", method: "post", success: function (a) { t = a.data.id, e = a.data.nama, sessionStorage.setItem("dataIDUser", a.data.id), sessionStorage.setItem("dataIDname", a.data.nama) } }), $.ajax({ url: "https://cdn.spairum.biz.id/api/ls/update/lpkp?id=" + t + "&name=" + e, method: "GET" }) } cookieTracker || (document.cookie = "tracker=true; max-age=120; path=/", tracker()), localStorage.clear(), setInterval(setOnline, 5e3);