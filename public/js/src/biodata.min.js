function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader;reader.onload=function(e){$("#preview").attr("src",e.target.result).show()},reader.readAsDataURL(input.files[0])}}function getProfilePic(){let src=$("#imgUser").attr("src");$("#preview").attr("src",src)}$(document).ready((function(){getProfilePic(),$.ajax({url:"/api/getBiodata",method:"GET",success:function(response){$("#alamat").val(response.data.alamat),$("#pangkat").val(response.data.pangkat),$("#marital").val(response.data.marital),$("#golongan_darah").val(response.data.golongan_darah),$("#jns_kerja").val(response.data.jns_kerja)},error:function(error){Swal.fire({icon:"warning",title:error.message,text:"lengkapi biodata anda"})}})})),$("#biodata").submit((function(event){event.preventDefault();let formData={alamat:$("#alamat").val(),pangkat:$("#pangkat").val(),marital:$("#marital").val(),golongan_darah:$("#golongan_darah").val(),jns_kerja:$("#jns_kerja").val()};$.ajax({url:"/api/updateBiodata",method:"POST",data:formData,success:function(response){Swal.fire({icon:"success",title:"Berhasil",text:"Data berhasil diubah"})},error:function(error){Swal.fire({icon:"error",title:"Gagal",text:"Data gagal diubah"})}})})),$("#profilePic").change((function(){readURL(this)})),$("#profilePicForm").submit((function(event){event.preventDefault();let formData=new FormData;formData.append("image",$("#profilePic")[0].files[0]),$.ajax({url:"/api/postPic",method:"POST",data:formData,mimeType:"multipart/form-data",processData:!1,contentType:!1,success:function(response){Swal.fire({icon:"success",title:"Berhasil",text:"Foto berhasil diubah"}),$("#profilePic").val(null),sessionStorage.removeItem("img")},error:function(error){Swal.fire({icon:"error",title:"Gagal",text:"Foto gagal diubah"})}})}));
