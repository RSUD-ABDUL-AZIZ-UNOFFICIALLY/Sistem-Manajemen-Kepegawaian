function updateClock(){let date=new Date,t=date.toLocaleTimeString(),dayName=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],monthName=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],year=date.toLocaleDateString("id-ID",{year:"numeric"}),dayNumber=date.toLocaleDateString("id-ID",{day:"numeric"});$("#day").text(dayName[date.getDay()]),$("#month").text(monthName[date.getMonth()]),$("#year").text(year),$("#dayNumber").text(dayNumber);date.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});$("#time").text(t),$("#date").text(dayName[date.getDay()]+", "+dayNumber+" "+monthName[date.getMonth()]+" "+year)}function geoFindMe(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(position){const latitude=position.coords.latitude,longitude=position.coords.longitude;position.coords.accuracy,$("#posisi").text(`Latitude: ${latitude} °, Longitude: ${longitude} °`),geoIn=`${latitude},${longitude}`,geoOut=`${latitude},${longitude}`,$.ajax({url:"/api/presensi/getlocation",method:"POST",data:{latitude:latitude,longitude:longitude},success:function(response){$("#posisi").text(response.data.location),response.data.status?posisi=1:posisi=0},error:function(error){posisi=!1}})}),(function(){$("#posisi").text("GPS tidak di aktifkan"),posisi=!1,Swal.fire({icon:"error",title:"Oops...",text:"Mohon aktifkan lokasi anda",buttons:!1,confirmButtonText:"OK",showCancelButton:!1,confirmButtonColor:"#3085d6",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}),navigator.permissions.query({name:"geolocation"}).then((function(result){"granted"===result.state?geoFindMe():"prompt"===result.state&&(result.onchange=function(){"granted"===result.state&&geoFindMe()})}))})):$("#posisi").text("Perangakat tidak mendukung geolocation"),setTimeout((()=>{geoFindMe()}),25e3)}async function getStatus(){try{const battery=await navigator.getBattery();$("#baterai").text(Math.round(100*battery.level)+"%"),battery.level<.5?$("#bateraiicon").attr("class","fa-solid fa-battery-quarter"):battery.level<.8?$("#bateraiicon").attr("class","fa-solid fa-battery-half"):$("#bateraiicon").attr("class","fa-solid fa-battery-three-quarters"),battery.charging?$("#bateraichager").attr("class","fa-solid fa-bolt"):$("#bateraiicon").attr("class","fa-solid fa-battery-three-quarters")}catch(error){}}async function pingLocalDevice(ip){const startTime=Date.now();wifi=0;try{if((await fetch(`http://${ip}`,{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(2e3)})).ok){Date.now();$("#wifi").text("Dalam Jaringan"),wifi=1}else $("#wifi").text("Diluar Jaringan"),wifi=0}catch(error){$("#wifi").text("Diluar Jaringan"),wifi=0}setTimeout((()=>{pingLocalDevice("10.60.0.161:8080")}),1e4)}setInterval(updateClock,1e3),geoFindMe(),getStatus(),pingLocalDevice("10.60.0.161:8080");
